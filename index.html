<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Material Aulas Repository</title>
</head>
<body>
    <h1>Repository Files and Folders</h1>
    <div id="file-list"></div>

    <script>
        // Base URL for GitHub API
        const repoUrl = 'https://api.github.com/repos/cristianapneto/material_aulas/contents/';

        // Function to display files and folders
        function displayFilesAndFolders(contents) {
            const fileListDiv = document.getElementById('file-list');
            fileListDiv.innerHTML = ''; // Clear any previous content

            contents.forEach(item => {
                const listItem = document.createElement('div');

                if (item.type === 'file') {
                    // Create a link for a file
                    const fileLink = document.createElement('a');
                    fileLink.href = item.download_url;
                    fileLink.textContent = item.name;
                    listItem.appendChild(fileLink);
                } else if (item.type === 'dir') {
                    // Create a link for a folder (subdirectory)
                    const folderLink = document.createElement('a');
                    folderLink.href = '#';
                    folderLink.textContent = item.name;
                    folderLink.onclick = function() {
                        fetchFolderContents(item.path); // Fetch contents of the folder
                    };
                    listItem.appendChild(folderLink);
                }

                fileListDiv.appendChild(listItem);
            });
        }

        // Fetch contents of a folder
        function fetchFolderContents(path) {
            fetch(`${repoUrl}${encodeURIComponent(path)}?ref=main`)
                .then(response => response.json())
                .then(data => displayFilesAndFolders(data))
                .catch(error => {
                    console.error('Error fetching folder contents:', error);
                });
        }

        // Fetch the initial contents of the repository (root level)
        fetch(repoUrl)
            .then(response => response.json())
            .then(data => displayFilesAndFolders(data))
            .catch(error => {
                console.error('Error fetching repository contents:', error);
            });
    </script>
</body>
</html>
